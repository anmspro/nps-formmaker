{"remainingRequest":"E:\\code\\vue-form-making\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\vue-form-making\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\code\\vue-form-making\\src\\components\\generateCode.js","dependencies":[{"path":"E:\\code\\vue-form-making\\src\\components\\generateCode.js","mtime":1653889326454},{"path":"E:\\code\\vue-form-making\\package.json","mtime":1654596815509},{"path":"E:\\code\\vue-form-making\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653903169935},{"path":"E:\\code\\vue-form-making\\node_modules\\babel-loader\\lib\\index.js","mtime":1653803163997},{"path":"E:\\code\\vue-form-making\\node_modules\\eslint-loader\\index.js","mtime":1653903146613}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction findRemoteFunc(list, funcList, tokenFuncList, blankList) {\n  for (var i = 0; i < list.length; i++) {\n    if (list[i].type == 'grid') {\n      list[i].columns.forEach(function (item) {\n        findRemoteFunc(item.list, funcList, tokenFuncList, blankList);\n      });\n    } else {\n      if (list[i].type == 'blank') {\n        if (list[i].model) {\n          blankList.push({\n            name: list[i].model,\n            label: list[i].name\n          });\n        }\n      } else if (list[i].type == 'imgupload') {\n        if (list[i].options.tokenFunc) {\n          tokenFuncList.push({\n            func: list[i].options.tokenFunc,\n            label: list[i].name,\n            model: list[i].model\n          });\n        }\n      } else {\n        if (list[i].options.remote && list[i].options.remoteFunc) {\n          funcList.push({\n            func: list[i].options.remoteFunc,\n            label: list[i].name,\n            model: list[i].model\n          });\n        }\n      }\n    }\n  }\n}\n\nexport default function (data) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'vue';\n  var funcList = [];\n  var tokenFuncList = [];\n  var blankList = [];\n  findRemoteFunc(JSON.parse(data).list, funcList, tokenFuncList, blankList);\n  var funcTemplate = '';\n  var blankTemplate = '';\n\n  for (var i = 0; i < funcList.length; i++) {\n    funcTemplate += \"\\n            \".concat(funcList[i].func, \" (resolve) {\\n              // \").concat(funcList[i].label, \" \").concat(funcList[i].model, \"\\n              // Call callback function once get the data from remote server\\n              // resolve(data)\\n            },\\n    \");\n  }\n\n  for (var _i = 0; _i < tokenFuncList.length; _i++) {\n    funcTemplate += \"\\n            \".concat(tokenFuncList[_i].func, \" (resolve) {\\n              // \").concat(tokenFuncList[_i].label, \" \").concat(tokenFuncList[_i].model, \"\\n              // Call callback function once get the token\\n              // resolve(token)\\n            },\\n    \");\n  }\n\n  for (var _i2 = 0; _i2 < blankList.length; _i2++) {\n    blankTemplate += \"\\n        <template slot=\\\"\".concat(blankList[_i2].name, \"\\\" slot-scope=\\\"scope\\\">\\n          <!-- \").concat(blankList[_i2].label, \" -->\\n          <!-- use v-model=\\\"scope.model.\").concat(blankList[_i2].name, \"\\\" to bind data -->\\n        </template>\\n    \");\n  }\n\n  if (type == 'vue') {\n    return \"<template>\\n  <div>\\n    <fm-generate-form :data=\\\"jsonData\\\" :remote=\\\"remoteFuncs\\\" :value=\\\"editData\\\" ref=\\\"generateForm\\\">\\n      \".concat(blankTemplate, \"\\n    </fm-generate-form>\\n    <el-button type=\\\"primary\\\" @click=\\\"handleSubmit\\\">\\u63D0\\u4EA4</el-button>\\n  </div>\\n</template>\\n\\n<script>\\n  export default {\\n    data () {\\n      return {\\n        jsonData: \").concat(data, \",\\n        editData: {},\\n        remoteFuncs: {\\n          \").concat(funcTemplate, \"\\n        }\\n      }\\n    },\\n    methods: {\\n      handleSubmit () {\\n        this.$refs.generateForm.getData().then(data => {\\n          // data check success\\n          // data - form data\\n        }).catch(e => {\\n          // data check failed\\n        })\\n      }\\n    }\\n  }\\n</script>\");\n  } else {\n    return \"<!DOCTYPE html>\\n  <html>\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/form-making/dist/FormMaking.css\\\">\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\">\\n      <fm-generate-form :data=\\\"jsonData\\\" :remote=\\\"remoteFuncs\\\" :value=\\\"editData\\\" ref=\\\"generateForm\\\">\\n        \".concat(blankTemplate, \"\\n      </fm-generate-form>\\n      <el-button type=\\\"primary\\\" @click=\\\"handleSubmit\\\">\\u63D0\\u4EA4</el-button>\\n    </div>\\n    <script src=\\\"https://unpkg.com/vue/dist/vue.js\\\"></script>\\n    <script src=\\\"https://unpkg.com/element-ui/lib/index.js\\\"></script>\\n    <script src=\\\"https://unpkg.com/form-making/dist/FormMaking.umd.js\\\"></script>\\n    <script>\\n      new Vue({\\n        el: '#app',\\n        data: {\\n          jsonData: \").concat(data, \",\\n          editData: {},\\n          remoteFuncs: {\\n            \").concat(funcTemplate, \"\\n          }\\n        },\\n        methods: {\\n          handleSubmit () {\\n            this.$refs.generateForm.getData().then(data => {\\n              // data check success\\n              // data - form data\\n            }).catch(e => {\\n              // data check failed\\n            })\\n          }\\n        }\\n      })\\n    </script>\\n  </body>\\n  </html>\");\n  }\n}",{"version":3,"names":["findRemoteFunc","list","funcList","tokenFuncList","blankList","i","length","type","columns","forEach","item","model","push","name","label","options","tokenFunc","func","remote","remoteFunc","data","JSON","parse","funcTemplate","blankTemplate"],"sources":["E:/code/vue-form-making/src/components/generateCode.js"],"sourcesContent":["function findRemoteFunc (list, funcList, tokenFuncList, blankList) {\r\n  for (let i = 0; i < list.length; i++) {\r\n    if (list[i].type == 'grid') {\r\n      list[i].columns.forEach(item => {\r\n        findRemoteFunc(item.list, funcList, tokenFuncList, blankList)\r\n      })\r\n    } else {\r\n      if (list[i].type == 'blank') {\r\n        if (list[i].model) {\r\n          blankList.push({\r\n            name: list[i].model,\r\n            label: list[i].name\r\n          })\r\n        }\r\n      } else if (list[i].type == 'imgupload') {\r\n        if (list[i].options.tokenFunc) {\r\n          tokenFuncList.push({\r\n            func: list[i].options.tokenFunc,\r\n            label: list[i].name,\r\n            model: list[i].model\r\n          })\r\n        }\r\n      } else {\r\n        if (list[i].options.remote && list[i].options.remoteFunc) {\r\n          funcList.push({\r\n            func: list[i].options.remoteFunc,\r\n            label: list[i].name,\r\n            model: list[i].model\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default function (data, type = 'vue') {\r\n\r\n  const funcList = []\r\n\r\n  const tokenFuncList = []\r\n\r\n  const blankList = []\r\n\r\n  findRemoteFunc(JSON.parse(data).list, funcList, tokenFuncList, blankList)\r\n\r\n  let funcTemplate = ''\r\n\r\n  let blankTemplate = ''\r\n\r\n  for(let i = 0; i < funcList.length; i++) {\r\n    funcTemplate += `\r\n            ${funcList[i].func} (resolve) {\r\n              // ${funcList[i].label} ${funcList[i].model}\r\n              // Call callback function once get the data from remote server\r\n              // resolve(data)\r\n            },\r\n    `\r\n  }\r\n\r\n  for(let i = 0; i < tokenFuncList.length; i++) {\r\n    funcTemplate += `\r\n            ${tokenFuncList[i].func} (resolve) {\r\n              // ${tokenFuncList[i].label} ${tokenFuncList[i].model}\r\n              // Call callback function once get the token\r\n              // resolve(token)\r\n            },\r\n    `\r\n  }\r\n\r\n  for (let i = 0; i < blankList.length; i++) {\r\n    blankTemplate += `\r\n        <template slot=\"${blankList[i].name}\" slot-scope=\"scope\">\r\n          <!-- ${blankList[i].label} -->\r\n          <!-- use v-model=\"scope.model.${blankList[i].name}\" to bind data -->\r\n        </template>\r\n    `\r\n  }\r\n\r\n  if (type == 'vue') {\r\n    return `<template>\r\n  <div>\r\n    <fm-generate-form :data=\"jsonData\" :remote=\"remoteFuncs\" :value=\"editData\" ref=\"generateForm\">\r\n      ${blankTemplate}\r\n    </fm-generate-form>\r\n    <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        jsonData: ${data},\r\n        editData: {},\r\n        remoteFuncs: {\r\n          ${funcTemplate}\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleSubmit () {\r\n        this.$refs.generateForm.getData().then(data => {\r\n          // data check success\r\n          // data - form data\r\n        }).catch(e => {\r\n          // data check failed\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>`\r\n  } else {\r\n    return `<!DOCTYPE html>\r\n  <html>\r\n  <head>\r\n    <meta charset=\"UTF-8\">\r\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\">\r\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/form-making/dist/FormMaking.css\">\r\n  </head>\r\n  <body>\r\n    <div id=\"app\">\r\n      <fm-generate-form :data=\"jsonData\" :remote=\"remoteFuncs\" :value=\"editData\" ref=\"generateForm\">\r\n        ${blankTemplate}\r\n      </fm-generate-form>\r\n      <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\r\n    </div>\r\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\r\n    <script src=\"https://unpkg.com/element-ui/lib/index.js\"></script>\r\n    <script src=\"https://unpkg.com/form-making/dist/FormMaking.umd.js\"></script>\r\n    <script>\r\n      new Vue({\r\n        el: '#app',\r\n        data: {\r\n          jsonData: ${data},\r\n          editData: {},\r\n          remoteFuncs: {\r\n            ${funcTemplate}\r\n          }\r\n        },\r\n        methods: {\r\n          handleSubmit () {\r\n            this.$refs.generateForm.getData().then(data => {\r\n              // data check success\r\n              // data - form data\r\n            }).catch(e => {\r\n              // data check failed\r\n            })\r\n          }\r\n        }\r\n      })\r\n    </script>\r\n  </body>\r\n  </html>`\r\n  }\r\n}"],"mappings":"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"}]}