{"remainingRequest":"E:\\code\\vue-form-making\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\vue-form-making\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\code\\vue-form-making\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue-form-making\\src\\components\\GenerateForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\vue-form-making\\src\\components\\GenerateForm.vue","mtime":1654599627840},{"path":"E:\\code\\vue-form-making\\package.json","mtime":1654596815509},{"path":"E:\\code\\vue-form-making\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653903169935},{"path":"E:\\code\\vue-form-making\\node_modules\\babel-loader\\lib\\index.js","mtime":1653803163997},{"path":"E:\\code\\vue-form-making\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653903169935},{"path":"E:\\code\\vue-form-making\\node_modules\\vue-loader\\lib\\index.js","mtime":1653903175370}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport _defineProperty from \"E:/code/vue-form-making/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"E:/code/vue-form-making/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport GenetateFormItem from \"./GenerateFormItem\";\nimport { loadJs } from \"../util/index.js\";\nexport default {\n  name: 'fm-generate-form',\n  components: {\n    GenetateFormItem: GenetateFormItem\n  },\n  props: ['data', 'remote', 'value', 'insite'],\n  data: function data() {\n    return {\n      models: {},\n      rules: {}\n    };\n  },\n  created: function created() {\n    this.generateModle(this.data.list);\n  },\n  mounted: function mounted() {},\n  methods: {\n    generateModle: function generateModle(genList) {\n      var _this = this;\n\n      for (var i = 0; i < genList.length; i++) {\n        if (genList[i].type === 'grid') {\n          genList[i].columns.forEach(function (item) {\n            _this.generateModle(item.list);\n          });\n        } else {\n          if (this.value && Object.keys(this.value).indexOf(genList[i].model) >= 0) {\n            this.models[genList[i].model] = this.value[genList[i].model];\n          } else {\n            if (genList[i].type === 'blank') {\n              this.$set(this.models, genList[i].model, genList[i].options.defaultType === 'String' ? '' : genList[i].options.defaultType === 'Object' ? {} : []);\n            } else {\n              // this.models[genList[i].model] = genList[i].options.answer\n              this.models[genList[i].model] = genList[i].options.defaultValue;\n            }\n          }\n\n          if (this.rules[genList[i].model]) {\n            this.rules[genList[i].model] = [].concat(_toConsumableArray(this.rules[genList[i].model]), _toConsumableArray(genList[i].rules.map(function (item) {\n              if (item.pattern) {\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  pattern: new RegExp(item.pattern)\n                });\n              } else {\n                return _objectSpread({}, item);\n              }\n            })));\n          } else {\n            this.rules[genList[i].model] = _toConsumableArray(genList[i].rules.map(function (item) {\n              if (item.pattern) {\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  pattern: new RegExp(item.pattern)\n                });\n              } else {\n                return _objectSpread({}, item);\n              }\n            }));\n          }\n        }\n      }\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this2.$refs.generateForm.validate(function (valid) {\n          if (valid) {\n            resolve(_this2.models);\n          } else {\n            reject(new Error(_this2.$t('fm.message.validError')).message);\n          }\n        });\n      });\n    },\n    reset: function reset() {\n      this.$refs.generateForm.resetFields();\n    },\n    onInputChange: function onInputChange(value, field) {\n      this.$emit('on-change', field, value, this.models);\n    },\n    refresh: function refresh() {}\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler: function handler(val) {\n        this.generateModle(val.list);\n      }\n    },\n    value: {\n      deep: true,\n      handler: function handler(val) {\n        console.log(JSON.stringify(val));\n        this.models = _objectSpread(_objectSpread({}, this.models), val);\n      }\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AAEA;EACAA,wBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,4CALA;EAMAC,IANA,kBAMA;IACA;MACAC,UADA;MAEAC;IAFA;EAIA,CAXA;EAYAC,OAZA,qBAYA;IACA;EACA,CAdA;EAeAC,OAfA,qBAeA,CACA,CAhBA;EAiBAC;IACAC,aADA,yBACAC,OADA,EACA;MAAA;;MACA;QACA;UACAA;YACA;UACA,CAFA;QAGA,CAJA,MAIA;UACA;YACA;UACA,CAFA,MAEA;YACA;cACA;YACA,CAFA,MAEA;cACA;cACA;YACA;UACA;;UAEA;YAEA;cACA;gBACA;kBAAAC;gBAAA;cACA,CAFA,MAEA;gBACA;cACA;YACA,CANA;UAOA,CATA,MASA;YAEA;cACA;gBACA;kBAAAA;gBAAA;cACA,CAFA,MAEA;gBACA;cACA;YACA,CANA;UAOA;QACA;MACA;IACA,CAxCA;IAyCAC,OAzCA,qBAyCA;MAAA;;MACA;QACA;UACA;YACAC;UACA,CAFA,MAEA;YACAC;UACA;QACA,CANA;MAOA,CARA;IASA,CAnDA;IAoDAC,KApDA,mBAoDA;MACA;IACA,CAtDA;IAuDAC,aAvDA,yBAuDAC,KAvDA,EAuDAC,KAvDA,EAuDA;MACA;IACA,CAzDA;IA0DAC,OA1DA,qBA0DA,CAEA;EA5DA,CAjBA;EA+EAC;IACAjB;MACAkB,UADA;MAEAC,OAFA,mBAEAC,GAFA,EAEA;QACA;MACA;IAJA,CADA;IAOAN;MACAI,UADA;MAEAC,OAFA,mBAEAC,GAFA,EAEA;QACAC;QACA;MACA;IALA;EAPA;AA/EA","names":["name","components","GenetateFormItem","props","data","models","rules","created","mounted","methods","generateModle","genList","pattern","getData","resolve","reject","reset","onInputChange","value","field","refresh","watch","deep","handler","val","console"],"sourceRoot":"src/components","sources":["GenerateForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"fm-style\">\r\n    <el-form ref=\"generateForm\" \r\n      label-suffix=\":\"\r\n      :size=\"data.config.size\"\r\n      :model=\"models\" :rules=\"rules\" :label-position=\"data.config.labelPosition\" :label-width=\"data.config.labelWidth + 'px'\">\r\n      <template v-for=\"item in data.list\">\r\n\r\n        <template v-if=\"item.type == 'grid'\">\r\n          <el-row\r\n            :key=\"item.key\"\r\n            type=\"flex\"\r\n            :gutter=\"item.options.gutter ? item.options.gutter : 0\"\r\n            :justify=\"item.options.justify\"\r\n            :align=\"item.options.align\"\r\n          >\r\n            <el-col v-for=\"(col, colIndex) in item.columns\" :key=\"colIndex\" :span=\"col.span\">\r\n              \r\n\r\n              <template v-for=\"citem in col.list\" >\r\n                <el-form-item v-if=\"citem.type=='blank'\" :label=\"citem.name\" :prop=\"citem.model\" :key=\"citem.key\">\r\n                  <slot :name=\"citem.model\" :model=\"models\"></slot>\r\n                </el-form-item>\r\n                <genetate-form-item v-else \r\n                  :key=\"citem.key\" \r\n                  :models.sync=\"models\" \r\n                  :remote=\"remote\" \r\n                  :rules=\"rules\" \r\n                  :widget=\"citem\"\r\n                  @input-change=\"onInputChange\">\r\n                </genetate-form-item>\r\n              </template>\r\n            </el-col>\r\n          </el-row>\r\n        </template>\r\n\r\n        <template v-else-if=\"item.type == 'blank'\">\r\n          <el-form-item :label=\"item.name\" :prop=\"item.model\" :key=\"item.key\">\r\n            <slot :name=\"item.model\" :model=\"models\"></slot>\r\n          </el-form-item>\r\n        </template>\r\n\r\n        <template v-else>\r\n          <genetate-form-item \r\n            :key=\"item.key\" \r\n            :models.sync=\"models\" \r\n            :rules=\"rules\" \r\n            :widget=\"item\" \r\n            @input-change=\"onInputChange\"\r\n            :remote=\"remote\">\r\n          </genetate-form-item>\r\n        </template>\r\n        \r\n      </template>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GenetateFormItem from './GenerateFormItem'\r\nimport {loadJs} from '../util/index.js'\r\n\r\nexport default {\r\n  name: 'fm-generate-form',\r\n  components: {\r\n    GenetateFormItem\r\n  },\r\n  props: ['data', 'remote', 'value', 'insite'],\r\n  data () {\r\n    return {\r\n      models: {},\r\n      rules: {}\r\n    }\r\n  },\r\n  created () {\r\n    this.generateModle(this.data.list)\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    generateModle (genList) {\r\n      for (let i = 0; i < genList.length; i++) {\r\n        if (genList[i].type === 'grid') {\r\n          genList[i].columns.forEach(item => {\r\n            this.generateModle(item.list)\r\n          })\r\n        } else {\r\n          if (this.value && Object.keys(this.value).indexOf(genList[i].model) >= 0) {\r\n            this.models[genList[i].model] = this.value[genList[i].model]\r\n          } else {\r\n            if (genList[i].type === 'blank') {\r\n              this.$set(this.models, genList[i].model, genList[i].options.defaultType === 'String' ? '' : (genList[i].options.defaultType === 'Object' ? {} : []))\r\n            } else {\r\n              // this.models[genList[i].model] = genList[i].options.answer\r\n              this.models[genList[i].model] = genList[i].options.defaultValue\r\n            }      \r\n          }\r\n          \r\n          if (this.rules[genList[i].model]) {\r\n            \r\n            this.rules[genList[i].model] = [...this.rules[genList[i].model], ...genList[i].rules.map(item => {\r\n              if (item.pattern) {\r\n                return {...item, pattern: new RegExp(item.pattern)}\r\n              } else {\r\n                return {...item}\r\n              }\r\n            })]\r\n          } else {\r\n            \r\n            this.rules[genList[i].model] = [...genList[i].rules.map(item => {\r\n              if (item.pattern) {\r\n                return {...item, pattern: new RegExp(item.pattern)}\r\n              } else {\r\n                return {...item}\r\n              }\r\n            })]\r\n          }      \r\n        }\r\n      }\r\n    },\r\n    getData () {\r\n      return new Promise((resolve, reject) => {\r\n        this.$refs.generateForm.validate(valid => {\r\n          if (valid) {\r\n            resolve(this.models)\r\n          } else {\r\n            reject(new Error(this.$t('fm.message.validError')).message)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    reset () {\r\n      this.$refs.generateForm.resetFields()\r\n    },\r\n    onInputChange (value, field) {\r\n      this.$emit('on-change', field, value, this.models)\r\n    },\r\n    refresh () {\r\n      \r\n    }\r\n  },\r\n  watch: {\r\n    data: {\r\n      deep: true,\r\n      handler (val) {\r\n        this.generateModle(val.list)\r\n      }\r\n    },\r\n    value: {\r\n      deep: true,\r\n      handler (val) {\r\n        console.log(JSON.stringify(val))\r\n        this.models = {...this.models, ...val}\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n// @import '../styles/cover.scss';\r\n</style>\r\n"]}]}